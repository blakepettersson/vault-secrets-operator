# Copyright (c) HashiCorp, Inc.
# SPDX-License-Identifier: MPL-2.0

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.1
  creationTimestamp: null
  name: vaultmounts.secrets.hashicorp.com
spec:
  group: secrets.hashicorp.com
  names:
    kind: VaultMount
    listKind: VaultMountList
    plural: vaultmounts
    singular: vaultmount
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: VaultMount is the Schema for the vaultmounts API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: VaultMountSpec defines the desired state of VaultMountSpec
            properties:
              config:
                description: Specifies configuration options for this mount; if set
                  on a specific mount, values will override any global defaults (e.g.
                  the system TTL/Max TTL)
                properties:
                  allowedResponseHeaders:
                    description: AllowedResponseHeaders list of headers to whitelist,
                      allowing a plugin to include them in the response. kubebuilder:validation:UniqueItems=true
                    items:
                      type: string
                    type: array
                    x-kubernetes-list-type: set
                  auditNonHMACRequestKeys:
                    description: AuditNonHMACRequestKeys list of keys that will not
                      be HMAC'd by audit devices in the request data object. kubebuilder:validation:UniqueItems=true
                    items:
                      type: string
                    type: array
                    x-kubernetes-list-type: set
                  auditNonHMACResponseKeys:
                    description: AuditNonHMACResponseKeys list of keys that will not
                      be HMAC'd by audit devices in the response data object. kubebuilder:validation:UniqueItems=true
                    items:
                      type: string
                    type: array
                    x-kubernetes-list-type: set
                  defaultLeaseTTL:
                    description: DefaultLeaseTTL  The default lease duration, specified
                      as a string duration like "5s" or "30m".
                    type: string
                  forceNoCache:
                    default: false
                    description: ForceNoCache Disable caching.
                    type: boolean
                  listingVisibility:
                    default: hidden
                    description: ListingVisibility Specifies whether to show this
                      mount in the UI-specific listing endpoint. Valid values are
                      "unauth" or "hidden". If not set, behaves like "hidden"
                    enum:
                    - unauth
                    - hidden
                    type: string
                  maxLeaseTTL:
                    description: MaxLeaseTTL The maximum lease duration, specified
                      as a string duration like "5s" or "30m".
                    type: string
                  passthroughRequestHeaders:
                    description: PassthroughRequestHeaders list of headers to whitelist
                      and pass from the request to the plugin. kubebuilder:validation:UniqueItems=true
                    items:
                      type: string
                    type: array
                    x-kubernetes-list-type: set
                type: object
              description:
                description: Description Specifies the human-friendly description
                  of the mount.
                type: string
              externalEntropyAccess:
                default: false
                description: ExternalEntropyAccess Enable the secrets engine to access
                  Vault's external entropy source.
                type: boolean
              local:
                default: false
                description: Local Specifies if the secrets engine is a local mount
                  only. Local mounts are not replicated nor (if a secondary) removed
                  by replication.
                type: boolean
              namespace:
                description: Namespace to auth to in Vault
                type: string
              options:
                additionalProperties:
                  type: string
                description: Options Specifies mount type specific options that are
                  passed to the backend.
                type: object
                x-kubernetes-map-type: granular
              path:
                description: Mount to use when authenticating to auth method.
                type: string
              sealWrap:
                default: false
                description: SealWrap Enable seal wrapping for the mount, causing
                  values stored by the mount to be wrapped by the seal's encryption
                  capability.
                type: boolean
              type:
                description: Type Specifies the type of the backend, such as "aws".
                  Only "kv" is supported right now.
                enum:
                - kv
                type: string
              vaultAuthRef:
                description: VaultAuthRef of the VaultAuth resource If no value is
                  specified the Operator will default to the `default` VaultAuth,
                  configured in its own Kubernetes namespace.
                type: string
            required:
            - path
            - type
            type: object
          status:
            description: VaultMountStatus defines the observed state of VaultMountSpec
            properties:
              error:
                type: string
              path:
                type: string
              valid:
                description: Valid auth mechanism.
                type: boolean
            required:
            - error
            - path
            - valid
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
